#!/bin/ksh
# run the Celtix java2wsdl tool 
#

me=`basename $0`
celtix_home=`dirname $0`/..

celtix_jar=$celtix_home/lib/celtix.jar

if [ ! -e $celtix_jar ]; then 
    celtix_jar=$celtix_home/build/lib/celtix.jar
    if [ ! -e $celtix_jar ]; then 
        echo "unable to find celtix.jar in $celtix_home/lib"
        exit 1
    fi
fi 

#
# add the jdk's tools.jar to the classpath
#
if [ -e "${JAVA_HOME}/lib/tools.jar" ]; then
    CLASSPATH=${JAVA_HOME}/lib/tools.jar:$CLASSPATH
fi

jaxws_home=$celtix_home/lib/jaxws-ri/20051104/

if [ ! -e $jaxws_home ]; then 
    jaxws_home=$celtix_home/tools/jaxws-ri/20051104/
    if [ ! -e $jaxws_home ]; then 
        echo "unable to find JAXWS RI"
        exit 1
    fi 
fi 

log_config=$celtix_home/etc/logging.properties 

if [ "$1" = "-celtix" ]; then
    $JAVA_HOME/bin/java -cp $celtix_jar -Djaxws.home=$jaxws_home -Djava.util.logging.config.file=$log_config org.objectweb.celtix.tools.JavaToWSDL "$@"
else 
    $JAVA_HOME/bin/java -cp $celtix_jar -Djaxws.home=$jaxws_home -Djava.util.logging.config.file=$log_config org.objectweb.celtix.tools.Java2Wsdl "$@"    
fi
