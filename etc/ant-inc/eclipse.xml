<?xml version="1.0"?>
<project name="celtix-eclipse" basedir="../..">
    <!-- Targets for generating an eclipse project -->
    <import file="paths.xml"/>
    <import file="compile.xml"/>

    <property name="eclipse.project.workspace" value="${basedir}/../workspace"/>

    <target name="generate.eclipse.workspace" description="Generates an eclipse workspace"
        depends="src.compile,unittest.compile,generate.eclipse.workspace.dirs,generate.eclipse.workspace.settings"/>

    <target name="generate.eclipse.workspace.dirs">
        <mkdir dir="${eclipse.project.workspace}"/>
        <mkdir dir="${eclipse.project.workspace}/.metadata"/>
        <mkdir dir="${eclipse.project.workspace}/.metadata/.plugins"/>
        <mkdir dir="${eclipse.project.workspace}/.metadata/.plugins/com.atlassw.tools.eclipse.checkstyle"/>
    </target>

    <target name="generate.eclipse.workspace.settings">
        <copy file="${basedir}/etc/eclipse/template.checkstyle-config.xml"
            tofile="${eclipse.project.workspace}/.metadata/.plugins/com.atlassw.tools.eclipse.checkstyle/checkstyle-config.xml"
            overwrite="yes">
            <filterset>
                <filter token="CHECKSTYLE_CONFIG_FILE" value="${basedir}${file.separator}etc${file.separator}checkstyle.xml"/>
            </filterset>
        </copy>
        <copy file="${basedir}/etc/eclipse/org.eclipse.jdt.core.prefs"
            tofile="${eclipse.project.workspace}/.metadata/.plugins/org.eclipse.core.runtime/.settings/org.eclipse.jdt.core.prefs"
            overwrite="yes">
            <filterset>
                <filter token="TOOLS_DIR" value="${tools.dir}"/>
                <filter token="JAXWS_HOME" value="${env.JAXWS_HOME}"/>
            </filterset>
        </copy>
    </target>

</project>
