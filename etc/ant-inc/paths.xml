<?xml version="1.0"?>
<project name="celtix-paths" basedir="../..">
    <!-- Path definitions -->

	<property name="tools.dir" location="${basedir}/tools"/>
	<property name="jaxws.home" location="${tools.dir}/jaxws-ri/20050929"/>
	
    <!-- on darwin, tools.jar does not exist -->

    <available property="tools.jar" value="${env.JAVA_HOME}/lib/tools.jar"
	       file="${env.JAVA_HOME}/lib/tools.jar"/>
    <condition property="tools.jar" value="${java.home}/../lib/tools.jar">
        <and>
            <not>
                <isset property="tools.jar"/>
            </not>
            <available filepath="${java.home}/../lib/" file="tools.jar" type="file"/>
        </and>
    </condition>

	<property name="build.dir" value="${basedir}/build"/>
	<property name="build.classes.dir" location="${build.dir}/classes"/>
	<property name="build.release.dir" location="${build.dir}/release"/>
	<property name="build.package.dir" location="${build.dir}/package"/>
	<property name="build.lib.dir" location="${build.dir}/lib"/>
	<property name="celtix.jar" location="${build.lib.dir}/celtix.jar"/>

	<path id="jdk.tools.classpath">
      <pathelement location="${tools.jar}"/>
    </path>

    <path id="jaxws.classpath">
        <fileset dir="${jaxws.home}/lib">
            <include name="*.jar"/>
        </fileset>
        <pathelement location="${tools.jar}"/>
    </path>
    
    <path id="wsdl4j.classpath">
        <fileset dir="${tools.dir}/wsdl4j/1.5.1">
            <include name="*.jar"/>
        </fileset>
    </path>
	
    <property name="junit.jar" value="${tools.dir}/junit/3.8.1/junit.jar"/>
    <path id="junit.classpath">
        <fileset dir="${tools.dir}/junit/3.8.1">
            <include name="*.jar"/>
        </fileset>
    </path>

	<property name="tomcat.local.classes" value=""/>
    <path id="embedded.tomcat.classpath">
        <pathelement location="${tomcat.local.classes}"/>
    	<fileset dir="${tools.dir}/tomcat/5.5.9/server/lib">
            <include name="*.jar"/>    	
    	</fileset>
        <fileset dir="${tools.dir}/tomcat/5.5.9/bin">
            <include name="*.jar"/>     
        </fileset>
        <fileset dir="${tools.dir}/tomcat/5.5.9/common/lib">
            <include name="*.jar"/>     
        </fileset>
    </path>
    
  
    <path id="src.compile.classpath">
        <path refid="wsdl4j.classpath"/>
    	<path refid="jaxws.classpath"/>
    	<path refid="embedded.tomcat.classpath"/>
    </path>
 
    <path id="unit.test.compile.classpath">
        <pathelement location="${basedir}/build/classes"/>
        <pathelement location="${basedir}/build/classes-tests/wsdl"/>
        <path refid="src.compile.classpath"/>
        <pathelement location="${tools.dir}/easymock/2.0/easymock.jar"/>
        <pathelement location="${tools.dir}/easymock/2.0/classextension/easymockclassextension.jar"/>
        <pathelement location="${tools.dir}/cglib/2.1.2/cglib-nodep.jar"/>
    	<path refid="junit.classpath"/>
    </path>
 
    
    <path id="emma.lib" >
      <pathelement location="${tools.dir}/emma/2.0.5312/emma.jar" />
      <pathelement location="${tools.dir}/emma/2.0.5312/emma_ant.jar"/>
    </path>

    <taskdef resource="emma_ant.properties" classpathref="emma.lib" />
    
    <path id="unit.test.classpath">
        <pathelement location="${basedir}/build/classes-instrumented"/>
        <pathelement location="${basedir}/build/classes-tests"/>
        <pathelement location="${basedir}/build/classes-tests/unit"/>
        <path refid="unit.test.compile.classpath"/>
        <path refid="emma.lib"/>
    </path>
    
    <path id="system.test.compile.classpath">
		<pathelement location="${basedir}/build/classes"/>
	    <pathelement location="${basedir}/build/classes-tests/wsdl"/>
	    <path refid="src.compile.classpath"/>
	    <pathelement location="${tools.dir}/easymock/2.0/easymock.jar"/>
            <pathelement location="${tools.dir}/easymock/2.0/classextension/easymockclassextension.jar"/>
            <pathelement location="${tools.dir}/cglib/2.1.2/cglib-nodep.jar"/>
	</path>
	 
    <path id="system.test.classpath">
	    <path refid="system.test.compile.classpath"/>
        <pathelement location="${basedir}/build/classes-tests/unit"/>
	    <pathelement location="${basedir}/build/classes-tests/system"/>
	</path>

	<target name="create.set_env">
    	<property name="unit.test.classpath" refid="unit.test.classpath"/>
    	<condition property="envmessage" value="set CLASSPATH=${unit.test.classpath};%CLASSPATH%">
    		<os family="windows"/>
    	</condition>
    	<condition property="envext" value=".bat">
    		<os family="windows"/>
    	</condition>
    	<property name="envmessage" value="export CLASSPATH=${unit.test.classpath}:$$CLASSPATH"/>
    	<property name="envext" value=".sh"/>
    	<echo file="build/set_env${envext}">${envmessage}   
        </echo>
    </target>

    <target name="echo.path">
       <pathconvert refid="${echo.path.refid}" property="path.string"/>
       <echo message="${path.string}"/>
    </target>

</project>
