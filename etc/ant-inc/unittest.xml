<?xml version="1.0"?>
<project name="celtix-unittests" basedir="../..">
    <!-- Targets for running the unittests -->

    <target name="unit.test" description="Run the unit tests" depends="src.compile,unittest.compile">
        <mkdir dir="${basedir}/build/testresults/unit"/>
        <junit fork="yes" haltonfailure="false"
        	failureproperty="unit.test.failed"
        	dir="${basedir}/build/classes-tests/unit"
        	timeout="100000"
        	>
            <formatter type="brief" useFile="false"/>
            <formatter type="xml"/>
            <classpath>
                <path refid="unit.test.classpath"/>
            </classpath>

            <batchtest todir="${basedir}/build/testresults/unit">
                <fileset dir="${basedir}/build/classes-tests/unit">
                    <include name="**/*Test.class"/>
                    <include name="**/*Tests.class"/>
                </fileset>
            </batchtest>
        </junit>
    	<fail message="JUnit test failure." if="unit.test.failed"/>
    </target>

</project>
