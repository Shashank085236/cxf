#
#
#    Licensed to the Apache Software Foundation (ASF) under one
#    or more contributor license agreements. See the NOTICE file
#    distributed with this work for additional information
#    regarding copyright ownership. The ASF licenses this file
#    to you under the Apache License, Version 2.0 (the
#    "License"); you may not use this file except in compliance
#    with the License. You may obtain a copy of the License at
#
#    http://www.apache.org/licenses/LICENSE-2.0
#
#    Unless required by applicable law or agreed to in writing,
#    software distributed under the License is distributed on an
#    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
#    KIND, either express or implied. See the License for the
#    specific language governing permissions and limitations
#    under the License.
#
#
#!/bin/sh
# run the CXF wsdl2service tool 
#

me=`basename $0`
cxf_home=`dirname $0`/..

cxf_jar=$cxf_home/lib/cxf-incubator.jar

if [ ! -f $cxf_jar ]; then 
    if [ ! -f ${cxf_home}/../../target/srcbuild_env ]; then
        echo "ERROR: Unable to find cxf-incubator.jar in $cxf_home/lib"
        exit 1
    else
        . ${cxf_home}/../../target/srcbuild_env
        cxf_jar=${CXF_CLASSPATH}
    fi
fi 

#
# add the jdk's tools.jar to the classpath
#

sun_tool_path=""
if [ ! `uname` = 'Darwin' ]; then
    sun_tool_path=${JAVA_HOME}/lib/tools.jar
    if [ ! -f $sun_tool_path ]; then
	echo "ERROR: Set JAVA_HOME to the path where the J2SE 5.0 (JDK5.0) is installed"
	exit 1
    fi
fi 

log_config=$cxf_home/etc/logging.properties 

cxf_classpath=${cxf_jar}:${CLASSPATH}:${sun_tool_path}

$JAVA_HOME/bin/java -cp ${cxf_classpath} -Djava.util.logging.config.file=$log_config org.apache.cxf.tools.misc.WSDLToService "$@"





